---
import { getLangFromUrl, useTranslations } from '../i18n/utils';
import BaseLayout from '../layouts/BaseLayout.astro';
import { languages } from '../i18n/ui';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<BaseLayout title={t('site.name')}>
	<main>
		<section class="hero container" style="text-align: center; padding: 100px 0 60px;">
			<h1 style="font-size: 4rem; margin-bottom: 2rem; background: linear-gradient(135deg, #fff 0%, #888 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">{t('hero.title')}</h1>
			<p style="font-size: 1.5rem; color: var(--text-secondary); max-width: 800px; margin: 0 auto 3rem;">{t('hero.subtitle')}</p>
			<div style="display: flex; gap: 1rem; justify-content: center;">
				<a href="https://github.com/monkey-sking/ProcessZero/releases/latest/download/Aion.dmg" class="btn btn-primary">{t('hero.download')}</a>
				<a href="#features" class="btn" style="border: 1px solid var(--border);">{t('hero.learn')}</a>
			</div>
			
				<div class="carousel-container" style="border-radius: 20px; overflow: hidden; background: #000; position: relative; padding: 40px 0;">
					<div class="carousel-track" id="carouselTrack" style="display: flex; gap: 20px; overflow-x: auto; scroll-snap-type: x mandatory; padding: 0 50%; scroll-behavior: smooth;">
						{Array.from({ length: 8 }).map((_, i) => (
							<div class="carousel-item" style="flex: 0 0 60%; aspect-ratio: 16/10; scroll-snap-align: center; transition: all 0.3s ease; opacity: 0.5; transform: scale(0.9);">
								<img src={`/screen-${i + 1}.jpg`} alt={`Aion Screenshot ${i + 1}`} style="width: 100%; height: 100%; object-fit: contain; border-radius: 12px; box-shadow: 0 20px 50px rgba(0,0,0,0.5);" />
							</div>
						))}
					</div>
				</div>
				<script>
					const track = document.getElementById('carouselTrack');
					const items = document.querySelectorAll('.carousel-item');
					
					const updateActive = () => {
						const center = track.scrollLeft + track.offsetWidth / 2;
						items.forEach(item => {
							const itemCenter = item.offsetLeft + item.offsetWidth / 2;
							const distance = Math.abs(center - itemCenter);
							if (distance < item.offsetWidth / 2) {
								item.style.opacity = '1';
								item.style.transform = 'scale(1)';
								item.style.zIndex = '10';
							} else {
								item.style.opacity = '0.5';
								item.style.transform = 'scale(0.9)';
								item.style.zIndex = '1';
							}
						});
					};

					track.addEventListener('scroll', updateActive);
					// Initial call
					setTimeout(updateActive, 100);
				</script>
		</section>

		<section id="features" class="container" style="padding: 100px 0;">
			<h2 style="font-size: 2.5rem; text-align: center; margin-bottom: 4rem;">{t('features.title')}</h2>
			<div class="features">
				<div class="feature-card">
					<div style="font-size: 2rem; margin-bottom: 1rem; color: var(--primary);">
						<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 16 14"/></svg>
					</div>
					<h3>{t('features.autoquit.title')}</h3>
					<p>{t('features.autoquit.desc')}</p>
				</div>
				<div class="feature-card">
					<div style="font-size: 2rem; margin-bottom: 1rem; color: var(--primary);">
						<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="3" width="20" height="14" rx="2" ry="2"/><line x1="8" y1="21" x2="16" y2="21"/><line x1="12" y1="17" x2="12" y2="21"/></svg>
					</div>
					<h3>{t('features.scenes.title')}</h3>
					<p>{t('features.scenes.desc')}</p>
				</div>
				<div class="feature-card">
					<div style="font-size: 2rem; margin-bottom: 1rem; color: var(--primary);">
						<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/></svg>
					</div>
					<h3>{t('features.smart.title')}</h3>
					<p>{t('features.smart.desc')}</p>
				</div>
				<div class="feature-card">
					<div style="font-size: 2rem; margin-bottom: 1rem; color: var(--primary);">
						<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"/><polyline points="15 3 21 3 21 9"/><line x1="10" y1="14" x2="21" y2="3"/></svg>
					</div>
					<h3>{t('features.stats.title')}</h3>
					<p>{t('features.stats.desc')}</p>
				</div>
				<div class="feature-card">
					<div style="font-size: 2rem; margin-bottom: 1rem; color: var(--primary);">
						<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>
					</div>
					<h3>{t('features.focus.title')}</h3>
					<p>{t('features.focus.desc')}</p>
				</div>
				<div class="feature-card">
					<div style="font-size: 2rem; margin-bottom: 1rem; color: var(--primary);">
						<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/><circle cx="12" cy="11" r="3"/></svg>
					</div>
					<h3>{t('features.privacy.title')}</h3>
					<p>{t('features.privacy.desc')}</p>
				</div>
			</div>
		</section>

		<section id="pricing" class="container" style="padding: 100px 0; text-align: center;">
			<h2 style="font-size: 2.5rem; margin-bottom: 1rem;">{t('pricing.title')}</h2>
			<p style="color: var(--text-secondary); margin-bottom: 4rem;">{t('pricing.subtitle')}</p>
			
			<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; max-width: 800px; margin: 0 auto;">
				<div class="feature-card" style="display: flex; flex-direction: column; align-items: center;">
					<h3 style="margin-bottom: 0.5rem;">{t('pricing.lite')}</h3>
					<div style="font-size: 2.5rem; font-weight: 800; margin-bottom: 1.5rem;">$0</div>
					<ul style="list-style: none; text-align: left; margin-bottom: 2rem; color: var(--text-secondary); width: 100%;">
						<li style="margin-bottom: 0.8rem;">✓ {t('pricing.feature.autoquit')}</li>
						<li style="margin-bottom: 0.8rem;">✓ {t('pricing.feature.whitelist')}</li>
						<li style="margin-bottom: 0.8rem;">✓ {t('pricing.feature.stats')}</li>
						<li style="margin-bottom: 0.8rem; opacity: 0.5;">✗ {t('pricing.feature.scenes')}</li>
						<li style="margin-bottom: 0.8rem; opacity: 0.5;">✗ {t('pricing.feature.support')}</li>
					</ul>
					<a href="https://github.com/monkey-sking/ProcessZero/releases/latest/download/Aion.dmg" class="btn" style="border: 1px solid var(--border); width: 100%;">{t('hero.download')}</a>
				</div>
				
				<div class="feature-card" style="display: flex; flex-direction: column; align-items: center; border-color: var(--primary); transform: scale(1.05); position: relative;">
					<div style="position: absolute; top: -15px; background: var(--primary); padding: 4px 12px; border-radius: 20px; font-size: 0.8rem; font-weight: 700;">{t('pricing.best')}</div>
					<h3 style="margin-bottom: 0.5rem;">{t('pricing.pro')}</h3>
					<div style="display: flex; align-items: baseline; gap: 0.5rem; margin-bottom: 1.5rem;">
						<span style="text-decoration: line-through; color: var(--text-secondary); font-size: 1.5rem;">$14.99</span>
						<span style="font-size: 2.5rem; font-weight: 800; color: var(--primary);">$9.99</span>
					</div>
					<ul style="list-style: none; text-align: left; margin-bottom: 2rem; color: var(--text-secondary); width: 100%;">
						<li style="margin-bottom: 0.8rem;">✓ {t('pricing.feature.free_base')}</li>
						<li style="margin-bottom: 0.8rem;">✓ {t('pricing.feature.scenes')}</li>
						<li style="margin-bottom: 0.8rem;">✓ {t('pricing.feature.rules')}</li>
						<li style="margin-bottom: 0.8rem;">✓ {t('pricing.feature.support')}</li>
						<li style="margin-bottom: 0.8rem;">✓ {t('pricing.feature.updates')}</li>
					</ul>
					<a href="https://aion.7caifei.com/buy" class="btn btn-primary" style="width: 100%;">{t('pricing.buy')}</a>
				</div>
			</div>
		</section>
		
		<section class="container" style="padding: 100px 0; text-align: center; border-top: 1px solid var(--border);">
			<h2 style="margin-bottom: 1.5rem;">{t('cta.title')}</h2>
			<a href="https://github.com/monkey-sking/ProcessZero/releases/latest/download/Aion.dmg" class="btn btn-primary">{t('cta.btn')}</a>
		</section>
	</main>
</BaseLayout>
